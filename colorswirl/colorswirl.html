
<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="Cache-Control" content="no-cache">

        <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
        <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="mobile-web-app-capable" content="yes">

        <title>Color Swirl</title>

        <script type="text/javascript" src="dat.gui.min.js"></script>
        <style>

            * {
                user-select: none;
            }

            html, body {
                overflow: hidden;
                background-color: #000;
            }

            body {
                margin: 0;
                position: fixed;
                width: 100%;
                height: 100%;
                font-family: Calibri, sans-serif;
            }

            canvas {
                width: 100%;
                height: 100%;
            }

            @keyframes promo-appear-animation {
                0% {
                    transform: scale(2.0);
                    opacity: 0;
                }
                100% {
                    transform: scale(1.0);
                    opacity: 1;
                }
            }

            .settings-panel {
                bottom :0;
                background-color: #333;
                width: 100%;
                height: 50px;
                position: absolute;
                color: #fff;
            }
            .settings-panel span {
                float: left;
                color: #f2f2f2;
                text-align: center;
                padding: 14px 16px;
                text-decoration: none;
                font-size: 17px;
            }
            .settings-panel span:hover {
                background-color: #ddd;
                color: black;
            }

            #more-menu, .more-menu {
              height: 0%;
              width: 100%;
              position: fixed;
              z-index: 1;
              bottom: 0;
              left: 0;
              background-color: #111;
              overflow-x: hidden;
              transition: 0.5s;
            }
            .more-menu-open {
                padding-top: 60px;
            }

            .more-menu a {
              padding: 8px 8px 8px 32px;
              text-decoration: none;
              font-size: 25px;
              color: #818181;
              display: block;
              transition: 0.3s;
            }

            .more-menu a:hover {
              color: #f1f1f1;
            }

            .more-menu .closebtn {
              position: absolute;
              top: 0;
              right: 25px;
              font-size: 36px;
              margin-left: 50px;
            }
        </style>
        <script>
            window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
            ga('create', 'UA-105392568-1', 'auto');
            ga('send', 'pageview');
        </script>
        <script async src="https://www.google-analytics.com/analytics.js"></script>
    </head>
    <body>
        <canvas></canvas>

        <div class="settings-panel">
            <!--<button onclick="multipleSplats(parseInt(Math.random() * 20) + 5);">Mix</button>-->
            <!--<span id="background">Background Color</span>-->
            <span id="mode" onclick="toggleMode()">Dark Mode</span>
            <span id="reset" onclick="window.location.reload()">Reset</span>
            <span id="more" onclick="openMenu()">More</span>
        </div>

        <div id="more-menu" class="more-menu">
            <a href="javascript:void(0)" class="closebtn" onclick="closeMenu()">&times;</a>
            <a href="javascript:void(0)" id="pause" onclick="toggleSwirl()">Pause Swirling</a>
            <a href="javascript:void(0)" id="addcolor" onclick="addColor()">Add Color</a>
            <a href="javascript:void(0)" id="screenshot" onclick="captureScreenshot()">Screenshot Swirl</a>
        </div>

        <script src="colorswirl.js"></script>
        <script>
            var mode = "default";
            var swirl = "on";
            function toggleMode() {
                if(mode === "default") {
                    modeDark();
                    mode = "dark";
                    document.getElementById('mode').innerText="Light Mode";
                } else {
                    modeDefault();
                    mode = "default";
                    document.getElementById('mode').innerText="Dark Mode";
                }
            }
            function toggleSwirl() {
                if(swirl === "on") {
                    pauseSwirl();
                    swirl = "off";
                    document.getElementById('pause').innerText="Start Swirling";
                } else {
                    unpauseSwirl();
                    swirl = "on";
                    document.getElementById('pause').innerText="Pause Swirling";
                }
            }
            function addColor() {
                multipleSplats(parseInt(Math.random() * 20) + 5);
            }
            function modeDark() {
                config.BACK_COLOR.r=0;
                config.BACK_COLOR.g=0;
                config.BACK_COLOR.b=0;
            }
            function modeDefault() {
                config.BACK_COLOR.r=255;
                config.BACK_COLOR.g=255;
                config.BACK_COLOR.b=255;
            }
            function pauseSwirl() {
                config.PAUSED = true;
            }
            function unpauseSwirl() {
                config.PAUSED = false;
            }
            function openMenu() {
                if(!isMobile()) {
                    document.getElementById("more-menu").style.height = "50%";
                } else {
                    document.getElementById("more-menu").style.height = "50%";
                }
                document.getElementById("more-menu").classList.add('more-menu-open');
            }

            function closeMenu() {
                document.getElementById("more-menu").style.height = "0";
                document.getElementById("more-menu").classList.remove('more-menu-open');
            }
        </script>
    </body>
</html>
